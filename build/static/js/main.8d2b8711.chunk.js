(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(63)},38:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),c=a.n(o),s=(a(38),a(7)),l=a(3),i=a(6),u=a.n(i),m=a(9),d=a(28),p=a(29),h=a(19),f=a.n(h),v=(a(41),a(43),{apiKey:"AIzaSyAl3P06p03umYlc1D-xzc6PfkW8u9Mx-TQ",authDomain:"new-projext-hooks.firebaseapp.com",projectId:"new-projext-hooks",storageBucket:"new-projext-hooks.appspot.com",messagingSenderId:"66578048784",appId:"1:66578048784:web:4f0976dd7c703c1a5da795",measurementId:"G-7G3CTHG4DD"}),b=new(function(){function e(){Object(d.a)(this,e),f.a.initializeApp(v),this.auth=f.a.auth(),this.db=f.a.firestore()}return Object(p.a)(e,[{key:"register",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(a,n);case 2:return r=e.sent,e.next=5,r.user.updateProfile({displayName:t});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.signInWithEmailAndPassword(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.signOut();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var e=Object(m.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.sendPasswordResetEmail(t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}()),E=r.a.createContext(null),g=b,w=a(16),N=a(12),k=a(4);function y(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="invalid email address"):t.email="Email required",e.password?e.password.length<6&&(t.password="Password Must be greater than 6 characters"):t.password="Password Required",t}var x={name:"",email:"",password:""};var C=function(e){var t=j(x,y,function(){return N.apply(this,arguments)}),a=t.handleChange,n=t.handleBlurr,o=t.errors,c=t.handleSubmit,l=t.values,i=t.isSubmitting,d=r.a.useState(!0),p=Object(k.a)(d,2),h=p[0],f=p[1],v=r.a.useState(null),b=Object(k.a)(v,2),E=b[0],w=b[1];function N(){return(N=Object(m.a)(u.a.mark(function t(){var a,n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=l.name,n=l.email,r=l.password,t.prev=1,!h){t.next=7;break}return t.next=5,g.login(n,r);case 5:t.next=9;break;case 7:return t.next=9,g.register(a,n,r);case 9:e.history.push("/"),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),console.error("Authentication Error",t.t0),w(t.t0.message);case 16:case"end":return t.stop()}},t,null,[[1,12]])}))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement("h2",{className:"mv3"},h?"Login":"Create Account"),r.a.createElement("form",{onSubmit:c,className:"flex flex-column"},!h&&r.a.createElement("input",{type:"text",onBlur:n,onChange:a,name:"name",value:l.name,className:o.name&&"error-input",placeholder:"Your Name",autoComplete:"off"}),r.a.createElement("input",{type:"email",onBlur:n,onChange:a,name:"email",value:l.email,placeholder:"Your E-mail",autoComplete:"off"}),o.email&&r.a.createElement("p",{className:"error-text"},o.email),r.a.createElement("input",{type:"password",onBlur:n,onChange:a,name:"password",value:l.password,className:o.password&&"error-input",placeholder:"Choose a secure Password",autoComplete:"off"}),o.password&&r.a.createElement("p",{className:"error-text"},o.password),E&&r.a.createElement("p",{className:"error-text"},E),r.a.createElement("div",{className:"flex mt-3"},r.a.createElement("button",{type:"submit",className:"button pointer mr2",disabled:i,style:{background:i?"red":"green"}},"Submit"),r.a.createElement("button",{type:"button",className:"pointer button",onClick:function(){return f(function(e){return!e})}},h?"Signup":"Already have an Account?"))),r.a.createElement("div",{className:"forgot-password"},r.a.createElement(s.b,{to:"/forgot"},"Forgot Password?")))};var j=function(e,t,a){var n=r.a.useState(e),o=Object(k.a)(n,2),c=o[0],s=o[1],l=r.a.useState({}),i=Object(k.a)(l,2),u=i[0],m=i[1],d=r.a.useState(!1),p=Object(k.a)(d,2),h=p[0],f=p[1];return r.a.useEffect(function(){h&&(0===Object.keys(u).length?(a(),f(!1)):f(!1))},[u]),{handleChange:function(e){e.persist(),s(function(t){return Object(N.a)({},t,Object(w.a)({},e.target.name,e.target.value))})},handleBlurr:function(){var e=t(c);m(e)},errors:u,handleSubmit:function(e){e.preventDefault();var a=t(c);m(a),f(!0)},values:c,isSubmitting:h}};function S(e){var t={};return e.description?e.description.length<10&&(t.description="Desription must be atleast 10 characters"):t.description="description required",e.url?/^(ftp|http|https):\/\/[^ "]+$/.test(e.url)||(t.password="URL must be valid"):t.url="provide a URL",t}var O={description:"",url:""};var B=function(e){var t=r.a.useContext(E),a=t.firebase,n=t.user,o=j(O,S,function(){if(n){var t=i.url,r=i.description,o={url:t,description:r,postedBy:{id:n.uid,name:n.displayName},voteCount:0,votes:[],comments:[],created:Date.now()};a.db.collection("links").add(o),e.history.push("/")}else e.history.push("/login")}),c=o.handleChange,s=o.errors,l=o.handleSubmit,i=o.values;return r.a.createElement("form",{onSubmit:l,className:"flex flex-column mt3"},r.a.createElement("input",{onChange:c,value:i.description,name:"description",placeholder:"A description for your link",autoComplete:"off",type:"text",className:s.description&&"error-input"}),s.description&&r.a.createElement("p",{className:"error-text"},s.description),r.a.createElement("input",{onChange:c,value:i.url,name:"url",placeholder:"URL for the link",autoComplete:"off",type:"url",className:s.url&&"error-input"}),s.url&&r.a.createElement("p",{className:"error-text"},s.url),r.a.createElement("button",{className:"button",type:"submit"},"Submit"))};var P=function(){var e=r.a.useContext(E).firebase,t=r.a.useState(""),a=Object(k.a)(t,2),n=a[0],o=a[1],c=r.a.useState(!1),s=Object(k.a)(c,2),l=s[0],i=s[1],d=r.a.useState(null),p=Object(k.a)(d,2),h=p[0],f=p[1];function v(){return(v=Object(m.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.resetPassword(n);case 3:i(!0),f(null),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("error sending email",t.t0),f(t.t0.message);case 11:case"end":return t.stop()}},t,null,[[0,7]])}))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement("input",{type:"email",className:"input",placeholder:"provideyour account email",onChange:function(e){return o(e.target.value)}}),r.a.createElement("div",null,r.a.createElement("button",{className:"button",onClick:function(){return v.apply(this,arguments)}},"Reset Password")),l&&r.a.createElement("p",null,"Check email to Reset Password"),h&&r.a.createElement("p",{className:"error-text"},h))},A=a(32),D=5;var L=a(31),I=a.n(L);var R=Object(l.g)(function(e){var t=e.link,a=e.index,n=e.showCount,o=r.a.useContext(E),c=o.user,l=o.firebase,i=c&&c.uid===t.postedBy.id;return r.a.createElement("div",{className:"flex items-start mt2"},r.a.createElement("div",{className:"flex items-center"},n&&r.a.createElement("span",{className:"gray"},a),r.a.createElement("div",{className:"vote-button pointer",onClick:function(e){if(c){var a=l.db.collection("links").doc(t.id);a.get().then(function(e){if(e.exists){var t=e.data().votes,n={votedBy:{id:c.uid,name:c.displayName}},r=[].concat(Object(A.a)(t),[n]),o=r.length;a.update({votes:r,voteCount:o})}})}else e.history.push("/login")}},"\u25b2")),r.a.createElement("div",{className:"ml1"},r.a.createElement("div",null,r.a.createElement("a",{href:t.url,className:"black no-underline"},t.description)," ",r.a.createElement("span",{className:"link"},"(",t.url.replace(/^https?:\/\//i,""),")")),r.a.createElement("div",{className:"f6 lh-copy gray"},r.a.createElement("span",{className:"bg-light"},t.voteCount)," votes by ",t.postedBy.name," |",I()(t.created)," "," | ",r.a.createElement(s.b,{to:"/link/:linkId"},t.comments.length>0?"".concat(t.comments.length," comments"):"discuss"),i&&r.a.createElement(r.a.Fragment,null," | ",r.a.createElement("span",{className:"delete-button",onClick:function(){l.db.collection("links").doc(t.id).delete().then(function(){console.log("Document with ID ".concat(t.id," deleted"))}).catch(function(e){console.error("error deleting the document")})}},"Delete")))))});var W=function(){var e=r.a.useContext(E).firebase,t=r.a.useState([]),a=Object(k.a)(t,2),n=a[0],o=a[1],c=r.a.useState([]),s=Object(k.a)(c,2),l=s[0],i=s[1],u=r.a.useState(""),m=Object(k.a)(u,2),d=m[0],p=m[1];return r.a.useEffect(function(){e.db.collection("links").get().then(function(e){var t=e.docs.map(function(e){return Object(N.a)({id:e.id},e.data())});i(t)})},[]),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=d.toLowerCase(),a=l.filter(function(e){return e.description.toLowerCase().includes(t)||e.url.toLowerCase().includes(t)||e.postedBy.name.toLowerCase().includes(t)});console.log(a),o(a)}},r.a.createElement("div",null,"Search ",r.a.createElement("input",{onChange:function(e){return p(e.target.value)}}),r.a.createElement("button",{className:"button"},"OK"))),n.map(function(e,t){return r.a.createElement(R,{key:e.id,showCount:!1,link:e,index:t})}))};var F=function(e){var t=r.a.useContext(E).firebase,a=r.a.useState([]),n=Object(k.a)(a,2),o=n[0],c=n[1],s=r.a.useState(null),l=Object(k.a)(s,2),i=l[0],u=l[1],m=r.a.useState(!1),d=Object(k.a)(m,2),p=d[0],h=d[1],f=e.location.pathname.includes("new"),v=e.location.pathname.includes("top"),b=Number(e.match.params.page),g=t.db.collection("links");function w(e){var t=e.docs.map(function(e){return Object(N.a)({id:e.id},e.data())});c(t);var a=t[t.length-1];c(t),u(a),h(!1)}r.a.useEffect(function(){var e=function(){var e=Boolean(i);return h(!0),v?g.orderBy("voteCount","desc").limit(D).onSnapshot(w):1===b?g.orderBy("created","desc").limit(D).onSnapshot(w):e?(h(!1),g.orderBy("voteCount","desc").startAfter(i.created).limit(D).onSnapshot(w)):void 0}();return function(){return e()}},[v,b]);var y=b?(b-1)*D+1:0;return r.a.createElement("div",{style:{opacity:p?.25:1}},o.map(function(e,t){return r.a.createElement(R,{key:e.id,showCount:!0,link:e,index:t+y})}),f&&r.a.createElement("div",{className:"pagination"},r.a.createElement("div",{className:"pointer mr-2",onClick:function(){b>1&&e.history.push("/new/".concat(b-1))}},"Previous"),r.a.createElement("div",{className:"pointer",onClick:function(){b<=o.length/D&&e.history.push("/new/".concat(b+1))}},"Next")))};var U=Object(l.g)(function(){var e=r.a.useContext(E),t=e.user,a=e.firebase;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"flex"},r.a.createElement("img",{src:"/logo.png",alt:"Hooks News Logo",className:"logo"}),r.a.createElement(s.c,{to:"/",className:"header-title"},"Hooks News"),r.a.createElement(s.c,{to:"/",className:"header-link"},"New"),r.a.createElement("div",{className:"divider"},"|"),r.a.createElement(s.c,{to:"/top",className:"header-link"},"Top"),r.a.createElement("div",{className:"divider"},"|"),r.a.createElement(s.c,{to:"/search",className:"header-link"},"search"),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"divider"},"|"),t&&r.a.createElement(s.c,{to:"/create",className:"header-link"},"Submit"))),r.a.createElement("div",{className:"flex"},t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header-name"},t.displayName),r.a.createElement("div",{className:"divider"},"|"),r.a.createElement("div",{className:"header-button",onClick:function(){return a.logout()}},"logout")):r.a.createElement(s.c,{to:"/login",className:"header-link"},"Login")))});var q=function(){var e=r.a.useState(null),t=Object(k.a)(e,2),a=t[0],n=t[1];return r.a.useEffect(function(){var e=g.auth.onAuthStateChanged(function(e){n(e)});return function(){return e()}},[]),a};var z=function(){var e=q();return r.a.createElement(s.a,null,r.a.createElement(E.Provider,{value:{user:e,firebase:g}},r.a.createElement("div",{className:"app-container"},r.a.createElement(U,null),r.a.createElement("div",{className:"route-container"},r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",render:function(){return r.a.createElement(l.a,{to:"/new/1"})}}),r.a.createElement(l.b,{path:"/create",component:B}),r.a.createElement(l.b,{path:"/Login",component:C}),r.a.createElement(l.b,{path:"/forgot",component:P}),r.a.createElement(l.b,{path:"/search",component:W}),r.a.createElement(l.b,{path:"/top",component:F}),r.a.createElement(l.b,{path:"/new/:page",component:F}),r.a.createElement(l.b,{path:"/link/:linkId",component:P}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.8d2b8711.chunk.js.map